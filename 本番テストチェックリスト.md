# 本番環境テストチェックリスト

## 前提
- ADMINアカウントでテスト（全機能アクセス可能）
- テスト用パートナー1社を事前作成
- MEMBERアカウントも用意（権限テスト用）

---

## 1. プロジェクト管理 [必須]

### 編集
- [ ] カスタムフィールドのバリデーション（必須・最小/最大値）

---

## 2. タスク管理 [必須]

- [x] タイトル・説明・期限・優先度・担当者を設定
- [ ] パートナーをタスクに割り当て

---

## 3. パートナー管理 [必須]

### 連絡先設定
- [ ] 「連絡先設定リンク送信」→ メール送信確認
- [x] リンクから連絡先入力フォーム表示 → 保存
- [x] 7日間期限切れトークンでアクセス → エラー表示

### 評価
- [x] 自動評価スコア（タスク完了率・期限遵守率）表示
- [x] 手動評価入力（品質/コミュニケーション/レスポンス速度/信頼性）
- [x] 評価履歴の表示

### レポートトークン管理
- [ ] トークン無効化

---

## 4. パートナーポータル [必須]

### レポート提出（トークンURL）
- [x] 担当プロジェクト一覧が表示される
- [x] レポート種別選択 → 内容入力 → 送信

### 連絡先設定（トークンURL）
- [x] `/partner-setup/:token` にアクセス → ログイン不要で表示
- [x] 連絡先情報入力 → 保存

### 無効トークン
- [x] 期限切れ/無効化済みトークンでアクセス → エラー表示

---

## 5. リマインダー

- [x] `/reminders` にリマインダー一覧表示
- [x] 未読/既読フィルタ切り替え
- [x] タイプ別フィルタ（タスク期限/遅延/プロジェクト期限/停滞）
- [x] 「既読にする」→ 未読バッジが減る
- [x] 「すべて既読」ボタンが動作する

---

## 6. エスカレーション設定 [ADMIN]

### ルール
- [x] `/admin/escalations` にルール一覧表示
- [x] 「ルール追加」→ 名前・トリガー条件（期限超過N日/進捗N%未満）・アクション設定
- [x] ルール作成 → 一覧に表示
- [x] 有効/無効トグル切り替え
- [x] ルール編集 → 保存
- [x] ルール削除 → 確認ダイアログ → 削除

### 実行履歴
- [x] 「実行履歴」タブ → ログ一覧表示
- [x] ステータス（実行済み/失敗）・対象タスク・ルール名が表示

---

## 7. マネージャーダッシュボード [ADMIN]
- [x] スタッフ稼働状況（担当タスク数・完了率）
- [x] 今後のマイルストーン（プロジェクト期限）
---

## 8. 自動レポート [ADMIN]

- [x] `/reports` にレポート設定一覧表示
- [x] 新規レポート設定作成（名前・タイプ・頻度・送信先）
- [x] 「今すぐ生成」→ レポート生成
- [x] CSV ダウンロード確認

---

## 9. パートナーレポート

- [x] `/partner-reports` にレポート一覧表示
- [x] 未読/既読フィルタ
- [x] レポートクリック → 詳細表示 → 既読マーク
- [x] 未読バッジ更新
- [x] 一括既読ボタン

---

## 10. ファイル管理

- [x] プロジェクト詳細「ファイル」タブ
- [x] ファイルアップロード（PDF, 画像等、10MB以下）
- [x] アップロード成功 → 一覧に表示
- [x] ファイルダウンロード
- [x] ファイル削除
- [x] 10MB超ファイル → エラーメッセージ
- [x] 許可されない拡張子 → エラーメッセージ

---

## 11. 検索

- [x] ヘッダー検索ボックスに2文字以上入力
- [x] プロジェクト・パートナー・タスクが横断検索される
- [x] 検索結果クリック → 詳細ページへ遷移
- [x] 1文字入力では検索が発動しないことを確認
- [x] 300msデバウンスが効いていることを確認（連打で大量リクエストが飛ばない）

---

## 12. 通知

### アプリ内通知
- [x] ヘッダーのベルアイコン → 通知ドロップダウン
- [x] 未読バッジ（数字）表示
- [x] 通知クリック → 既読 + 関連ページへ遷移
- [x] `/notifications` で通知一覧表示
- [x] 「すべて既読」ボタン

### リアルタイム通知（WebSocket）
- [x] ページを開いた状態で別タブからアクション → 通知がリアルタイムで届く
- [x] 未読バッジがリアルタイムで更新される

---

## 13. 設定

### プロフィール
- [x] `/profile` でプロフィール編集（氏名等）
- [x] アバター設定

### 通知設定
- [x] `/settings` で通知設定（ダイジェスト時間・各種ON/OFF）

### 組織設定 [ADMIN]
- [x] `/admin/settings` にアクセス
- [x] Slack Webhook URL設定・保存
- [x] LINE連携設定
- [x] SMS/Twilio連携設定

---

## 14. ユーザー管理 [ADMIN]

- [ ] ユーザー一覧表示
- [ ] ユーザー詳細表示
- [ ] ユーザーロール変更（ADMIN/MANAGER/MEMBER）
- [ ] ユーザー無効化 → ログイン不可になることを確認
- [ ] ユーザー有効化 → ログイン可能に復帰

---

## 15. カスタムフィールドテンプレート [ADMIN]

- [ ] テンプレート一覧表示
- [ ] 新規テンプレート作成（名前・フィールドタイプ・バリデーション設定）
- [ ] テンプレートをプロジェクト作成時に選択して利用
- [ ] テンプレート使用回数の表示
- [ ] テンプレート無効化
- [ ] テンプレート削除

---

## 16. 監査ログ [ADMIN]

- [ ] 監査ログ一覧表示
- [ ] エンティティ別フィルタ（プロジェクト/タスク/パートナー等）
- [ ] ユーザー別フィルタ
- [ ] 日付範囲指定フィルタ
- [ ] アクション別フィルタ（作成/更新/削除）
- [ ] 最近のアクティビティ表示

---

## 17. ダッシュボードCSVエクスポート

- [x] ダッシュボードからCSVエクスポートボタン表示
- [x] 週次レポート生成 → CSVダウンロード
- [x] 月次レポート生成 → CSVダウンロード
- [x] カスタム期間指定 → CSVダウンロード

---

## 18. UI/レスポンシブ

- [x] サイドバー折りたたみ/展開（デスクトップ）
- [x] ハンバーガーメニュー（モバイル幅）
- [x] ダークモード切り替え → リロード後も維持
- [x] ADMIN以外でログイン → ADMIN限定メニュー非表示
- [x] ローディングスピナーが適切に表示される
- [x] 空データ時の表示が適切（「データがありません」等）

---

## 19. エラーハンドリング

- [x] 存在しないURL → `/today` にリダイレクト
- [x] MEMBER権限で `/admin/escalations` にアクセス → アクセス拒否
- [x] MEMBER権限で `/admin/settings` にアクセス → アクセス拒否
- [x] フォーム必須項目を空で送信 → 日本語エラーメッセージ
- [x] APIエラー時にErrorBoundaryが動作（本番では詳細非表示）
- [x] ネットワークエラー時に適切なエラーメッセージ

---

## 20. Cronジョブ・自動処理（運用確認）

- [x] ヘルススコアが日次で再計算されている（midnight）
- [x] リマインダーが自動生成されている（毎分）
- [x] エスカレーションが自動実行されている（毎時）
- [x] ダイジェストメールが7AMに送信される

---

## テスト結果

| 実施日 | 実施者 | 結果 | 備考 |
|--------|--------|------|------|
|        |        |      |      |
